// MOARdV fixes / customizations for the Yarbrough08 Mk1-1A2 parts

// Heat shield
@PART[Mk1-1A2?HS]
{
	// Adjust CoP and CoL to be more inline with stock heatshield
	@CoPOffset = 0.0, 1.1, 0.0
	@CoLOffset = 0.0, -0.36, 0.0

	// 	Career stuff ... hopefully not too far off (I don't play career, so these may be imbalanced)
	@TechRequired = landing
	@entryCost = 1400
	@cost = 750

	// Move to Thermal category.
	@category = Thermal

	// Lighten up a little
	@mass = 0.55

	// Adjust drag to match existing parts
	@minimum_drag = 0.2

	// Align this with other parts
	@maxTemp = 3300

	// I'm not 100% sure this actually is doing anything...
	@MODULE[ModuleAblator]
	{
		useChar = True
		charModuleName = shieldChar
	}

	MODULE
	{
		name = ModuleColorChanger
		moduleID = shieldChar
		shaderProperty = _BurnColor
		useRate = False
		toggleInEditor = False
		toggleInFlight = False

		redCurve
		{
			key = 0 0
			key = 1 1
		}
		greenCurve
		{
			key = 0 0
			key = 1 1
		}
		blueCurve
		{
			key = 0 0
			key = 1 1
		}
		alphaCurve
		{
			key = 0 0.8
		}
	}

	// Let's update the RCS thrusters
	@MODULE[ModuleRCS]
	{
		@name = ModuleRCSFX
		stagingEnabled = False
	}

	EFFECTS
	{
		running
		{
			AUDIO_MULTI_POOL
			{
				channel = Ship
				transformName = RCS
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.1 0.0
				volume = 0.5 0.025
				volume = 1.0 0.1
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_small
				transformName = RCS
				emission = 0.0 0.0
				emission = 0.1 0.0
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				localRotation = -90, 0, 0
			}
		}
	}

	// Take batteries and monoprop out of the heatshield.  They belong in the pod proper.
	!RESOURCE[MonoPropellant] {}
	!RESOURCE[ElectricCharge] {}

	// Add a lifting surface module - stock heatshields have them.
	MODULE
	{
		name = ModuleLiftingSurface
		useInternalDragModel = False
		deflectionLiftCoeff = 1.5
		liftingSurfaceCurve = CapsuleBottom
		disableBodyLift = False
		omnidirectional = False
		perpendicularOnly = True
		transformDir = Y
		transformSign = -1
		nodeEnabled = True
		attachNodeName = bottom
	}
}

// Yarbrough command pod
@PART[Mk1-1A2]
{
	// Adjust these things ... I lost my notes on why I picked these values...
	@CoPOffset = 0.0, 0.6, 0.0
	@CenterOfBuoyancy = 0.0, 0.8, 0.0
	@CenterOfDisplacement = 0.0, -0.3, 0.0
	@buoyancy = 1.1
	@CoLOffset = 0.0, -0.45, 0.0

	// Move the tech ... I don't play career, so maybe this is okay?
	@TechRequired = commandModules

	@maxTemp = 1400
	@skinMaxTemp = 2400
	bodyLiftOnlyUnattachedLift = True
	bodyLiftOnlyAttachName = bottom

	// Locatization
	@MODULE[ModuleScienceExperiment]
	{
		@experimentActionName = #autoLOC_502009 //#autoLOC_502009 = Crew Report
		@resetActionName = #autoLOC_502010 //#autoLOC_502010 = Discard Crew Report
		@reviewActionName = #autoLOC_502200 //#autoLOC_502200 = Review Report
	}
	@MODULE[ModuleScienceContainer]
	{
		@reviewActionName = #autoLOC_502201 //#autoLOC_502201 = Review Stored Data
		@storeActionName = #autoLOC_502202 //#autoLOC_502202 = Store Experiments
	}

	// Moved from heat shield
	RESOURCE
	{
		name  = MonoPropellant
		amount = 125
		maxAmount = 125
	}

	// Add the internal radio
	MODULE
	{
		name = ModuleDataTransmitter
		antennaType = INTERNAL
		packetInterval = 1.0
		packetSize = 2
		packetResourceCost = 12.0
		requiredResource = ElectricCharge
		antennaPower = 5000
		optimumRange = 2500
		packetFloor = .1
		packetCeiling = 5
	}

	// Allow lifting surface
	MODULE
	{
		name = ModuleLiftingSurface
		useInternalDragModel = False
		deflectionLiftCoeff = 1.4
		liftingSurfaceCurve = CapsuleBottom
		disableBodyLift = False
		omnidirectional = False
		perpendicularOnly = True
		transformDir = Y
		transformSign = -1
		nodeEnabled = True
		attachNodeName = bottom
	}
}
