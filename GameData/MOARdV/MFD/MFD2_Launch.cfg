// Launch operations page
//
// R1 / R7 @ 5.5
// R2 / R8 @ 14
// R3 / R9 @ 23
// R4 / R10 @ 31.5
// R5 / Home @ 40
// R6 @ 49
// Bottom cluster @ 56.5
// STBY @ 57.5

MAS_PAGE
{
	name = MAS_MFD2_Launch
	
	onExit = fc.SetPersistent("%AUTOID%-Back", "MAS_MFD2_Launch")

	// Top row softkeys R1, R2, R3, R4, R5, R6
	softkey = 2, mechjeb.ToggleAscentAutopilot()
	softkey = 5, fc.SetPersistent("%AUTOID%", "MAS_MFD2_PreLaunch")
	softkey = 6, fc.SetPersistent("%AUTOID%", "MAS_MFD2_Orbit")

	// Bottom row softkeys R7, R8, R9, R10
	softkey = 10, fc.ToggleSASSpeedMode()

	// Next = 11
	// Prev = 12
	// Up arrow = 13
	// Down arrow = 14
	// Left arrow = 15
	// Right arrow = 16
	// Zoom +/ ENTER = 17
	// Zoom -/ ESC = 18
	// Home = 19

	// Top row softkeys
	IMAGE
	{
		name = Autopilot engage R2
		texture = MOARdV/MFD/frame6ch112x48
		position = 176, -8
		passiveColor = COLOR_MFD2_TEXT_DIMMED
		activeColor = COLOR_MFD2_TEXT_HIGHLIGHT
		colorVariable = mechjeb.AscentAutopilotActive()
	}
	TEXT
	{
		name = Pilot Engage
		text = AUTO
		position = 12.5, 0
	}
	IMAGE
	{
		name = Pre-launch Page Select R5
		texture = MOARdV/MFD/frame6ch112x48
		position = 592, -8
		passiveColor = COLOR_MFD2_TEXT_GREEN
	}
	TEXT
	{
		name = Pre-launch Page Selector
		text = PRE-
		position = 38.5, 0
	}
	IMAGE
	{
		name = Orbit Page Select R6
		texture = MOARdV/MFD/frame6ch112x48
		position = 736, -8
		passiveColor = COLOR_MFD2_TEXT_GREEN
	}
	TEXT
	{
		name = Orbit Page Selector
		text = ORBIT
		position = 47, 0
	}
	IMAGE
	{
		name = Standby Page Select STBY
		texture = MOARdV/MFD/frame6ch112x48
		position = 872, -8
		passiveColor = COLOR_MFD2_TEXT_GREEN
	}
	TEXT
	{
		name = Standby Page Selector
		text = STBY
		position = 56, 0
	}

	// MechJeb Status
	TEXT
	{
		name = Mechjeb Caption
		text = MECHJEB
		position = 56, 1.5
	}
	IMAGE
	{
		name = Mechjeb Status Border
		texture = MOARdV/MFD/frameFill6ch112x48
		position = 896, 88
		activeColor = COLOR_MFD2_TEXT_GREEN
		passiveColor = COLOR_MFD2_TEXT_RED
		colorVariable = mechjeb.Available()
	}
	TEXT
	{
		name = Mechjeb Fail Status
		text = FAULT
		position = 57, 3
		textColor = COLOR_MFD2_TEXT_RED
		variable = 1 - mechjeb.Available()
	}
	TEXT
	{
		name = Mechjeb Ready Status
		text = READY
		position = 57, 3
		textColor = COLOR_MFD2_TEXT_GREEN
		variable = mechjeb.Available()
	}
	TEXT
	{
		name = Launch Sequence Caption
		text = AUTOPILOT
		position = 55.0, 4.5
	}
	IMAGE
	{
		name = Launch Sequence Status Border
		texture = MOARdV/MFD/frameFill6ch112x48
		position = 896, 184
		activeColor = COLOR_MFD2_TEXT_GREEN
		passiveColor = 128, 128, 128, 255
		colorVariable = mechjeb.AscentAutopilotActive()
	}
	TEXT
	{
		name = Launch Seq Status
		text = ACTIVE
		position = 56.5, 6
		textColor = COLOR_MFD2_TEXT_GREEN
		variable = mechjeb.AscentAutopilotActive()
	}
	TEXT
	{
		name = MJ Launch Data
		text = Launch Alt. [#ffff9b]<=0,6:0=>[#afd3ff]km$&$fc.Min(999999, mechjeb.GetDesiredLaunchAltitude() * 0.001)$$$Launch Inc. [#ffff9b]<=0,6:0=>[#afd3ff]°$&$mechjeb.GetDesiredLaunchInclination()
		position = 34, 3
	}
	
	// Bottom soft keys
	IMAGE
	{
		name = Mode border R10
		texture = MOARdV/MFD/frame6ch112x48
		position = 456, 984
		passiveColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	TEXT
	{
		name = Mode scalar
		text = MODE
		position = 30, 31
	}
	
	// Caution Lamps
	IMAGE
	{
		name = Fuel Caution Border
		texture = MOARdV/MFD/frameFill6ch112x48
		position = 896, 312
		activeColor = COLOR_MFD2_TEXT_YELLOW
		passiveColor = 128, 128, 128, 255
		colorVariable = (fc.PropellantStageThreshold(0.0, 0.1))
	}
	TEXT
	{
		name = Fuel Caution Status
		text = FUEL
		position = 57.5, 10
		textColor = COLOR_MFD2_TEXT_YELLOW
		variable = fc.PropellantStageThreshold(0.0, 0.1)
	}
	IMAGE
	{
		name = Engine Warning Border
		texture = MOARdV/MFD/frameFill6ch112x48
		position = 896, 378
		activeColor = COLOR_MFD2_TEXT_RED
		passiveColor = 128, 128, 128, 255
		colorVariable = fc.EngineFlameout() * fc.PeriodStep(2)
	}
	TEXT
	{
		name = Engine Warning Status
		text = ENGINE
		position = 56.5, 12
		textColor = COLOR_MFD2_TEXT_RED
		variable = fc.EngineFlameout()
	}

	// Launch data
	TEXT
	{
		name = target captions
		text = Target : [#ffff9b]<=0=>$&$fc.TargetName()$$$Closest:        km in$$$Rel Inc:        °
		position = 21,8
		variable = fc.TargetType()
	}
	TEXT
	{
		name = target data
		text = <=0,8:0.0=>      <=1:METddd/hh:mm:ss=>$&$ fc.Min(fc.TargetClosestApproachDistance() * 0.001, 999999.9); fc.TargetClosestApproachTime()$$$<=0,8:0.0=>$&$fc.TargetRelativeInclination()
		position = 29,9
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
		variable = fc.TargetType()
	}
	TEXT
	{
		name = Launch data captions
		textfile = MOARdV/MFD/MFD2_Launch.txt
		position = 0, 2
	}
	TEXT
	{
		name = Launch data
		textfile = MOARdV/MFD/MFD2_LaunchData.txt
		position = 5, 2
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	//TEXT
	//{
	//	name = Mode / Pos Caption
	//	text = Mode:$$$ Hdg:    °$$$ SS :    °$$$ Pit:    °$$$ AoA:    °$$$Roll:    °
	//	position = 49,19
	//}
	//TEXT
	//{
	//	name = Mode / Pos Data
	//	text = <=0,4:"OBT";"TGT";"SRF"=> $&$ fc.GetSASSpeedMode()$$$<=0,4:0=>$&$fc.Heading()$$$<=0,4:0=>$&$fc.Sideslip()$$$<=0,4:0=>$&$fc.Pitch()$$$<=0,4:0=>$&$fc.AngleOfAttack()$$$<=0,4:0=>$&$fc.Roll()
	//	position = 54,19
	//	textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	//}
	
	// Engineering Data
	TEXT
	{
		name = Throttle Caption
		text = Throttle
		position = 4,13
	}
	IMAGE
	{
		name = Throttle Gauge
		texture = MOARdV/MFD/gauge128x64
		position = 0, 448
		size = 256,128
		passiveColor = COLOR_MFD2_TEXT
	}
	ELLIPSE
	{
		name = Throttle Fill
		position  = 128, 576
		startColor = COLOR_MFD2_TEXT_RED
		endColor = COLOR_MFD2_TEXT_HIGHLIGHT
		startWidth = 8
		vertexCount = 16
		radiusX = 100
		startAngle = 180
		endAngle = 180 - 180 * fc.GetThrottle()
	}
	IMAGE
	{
		name = Throttle Needle
		texture = MOARdV/MFD/needle64x8
		position = 0, 568
		size = 128,16
		rotationOffset = 64, 0
		rotation = -180 * fc.GetThrottle()
		passiveColor = 255, 255, 255, 255
	}
	IMAGE
	{
		name = Throttle Status Border
		texture = MOARdV/MFD/frameFill4ch80x48
		position = 88, 560
		passiveColor = COLOR_MFD2_TEXT
	}
	TEXT
	{
		name = Throttle Setting
		text = <=0,3:0=> $&$ fc.GetThrottle() * 100
		position = 5.75, 17.5
		fontSize = 24, 48
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	
	TEXT
	{
		name = Fuel Caption
		text = Fuel
		position = 6, 20
	}
	IMAGE
	{
		name = Fuel Gauge
		texture = MOARdV/MFD/gauge128x64
		position = 0, 672
		size = 256,128
		passiveColor = COLOR_MFD2_TEXT
	}
	ELLIPSE
	{
		name = Fuel Fill
		position  = 128, 800
		startColor = 255, 255 * fc.PropellantStagePercent(), 155 * fc.PropellantStagePercent(), 255
		startWidth = 8
		vertexCount = 16
		radiusX = 100
		startAngle = 180
		endAngle = 180 - 180 * fc.PropellantStagePercent()
	}
	IMAGE
	{
		name = Fuel Needle
		texture = MOARdV/MFD/needle64x8
		position = 0, 792
		size = 128,16
		rotationOffset = 64, 0
		rotation = -180 * fc.PropellantStagePercent()
		passiveColor = 255, 255, 255, 255
	}
	IMAGE
	{
		name = Fuel Status Border
		texture = MOARdV/MFD/frameFill4ch80x48
		position = 88, 784
		passiveColor = COLOR_MFD2_TEXT
	}
	TEXT
	{
		name = Fuel remaining percent
		text = <=0,3:0=> $&$ fc.PropellantStagePercent() * 100
		position = 5.75, 24.5
		fontSize = 24, 48
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	TEXT
	{
		name = Fuel remaining values
		text = <=0,6:0=>[#afd3ff]kg $&$ fc.Min(999999, fc.PropellantStageCurrent())$$$<=0,8:0.0=>[#afd3ff]kg/s $&$ fc.PropellantDelta()
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
		position = 0, 26.5
	}

	// Launch navball
	NAVBALL
	{
		name = PFD navball
		model = ASET/ASET_Props/MFDs/ALCORPFD/NavBall
		texture = ASET/ASET_Props/MFDs/ALCORPFD/NavBall000
		position = 512, 704
		size = 512, 512
		opacity = 1.00
		color = 255, 255, 255, 255
		iconScale = 2.00
	}
	LINE_STRING
	{
		name = Srf Prograde yaw line

		position = 256, 448

		startColor = 0, 255, 0, 255

		startWidth = 5

		vertex = fc.Remap(fc.YawSurfacePrograde(), -8, 8, 2, 509), 2
		vertex = fc.Remap(fc.YawSurfacePrograde(), -8, 8, 2, 509), 509

		variable = fc.GetSASSpeedMode() == 0
	}
	LINE_STRING
	{
		name = Srf Prograde pitch line

		position = 256, 448

		startColor = 0, 255, 0, 255

		startWidth = 5

		vertex = 2, fc.Remap(fc.PitchSurfacePrograde(), -8, 8, 3, 509)
		vertex = 509, fc.Remap(fc.PitchSurfacePrograde(), -8, 8, 3, 509)

		variable = fc.GetSASSpeedMode() == 0
	}
	LINE_STRING
	{
		name = Obt Prograde yaw line

		position = 256, 448

		startColor = 0, 255, 0, 255

		startWidth = 5

		vertex = fc.Remap(fc.YawPrograde(), -8, 8, 2, 509), 2
		vertex = fc.Remap(fc.YawPrograde(), -8, 8, 2, 509), 509

		variable = fc.GetSASSpeedMode() == 1
	}
	LINE_STRING
	{
		name = Obt Prograde pitch line

		position = 256, 448

		startColor = 0, 255, 0, 255

		startWidth = 5

		vertex = 2, fc.Remap(fc.PitchPrograde(), -8, 8, 3, 509)
		vertex = 509, fc.Remap(fc.PitchPrograde(), -8, 8, 3, 509)

		variable = fc.GetSASSpeedMode() == 1
	}
	IMAGE
	{
		name = Navball Mask
		texture = MOARdV/MFD/navBallMask512x512
		position = 256, 448
	}
	
	// Heading / Sideslip / Pitch / AoA
	TEXT
	{
		name = Heading Caption
		text = Heading
		position = 28.5, 11.625
	}
	IMAGE
	{
		name = Heading Border
		texture = MOARdV/MFD/frame4ch80x48
		position = 452, 404
		size = 120, 72
		passiveColor = COLOR_MFD2_TEXT
	}
	TEXT
	{
		name = Heading
		text = <=0,3:0=>$&$ fc.Heading()
		position = 30, 13.0
		fontSize = 24, 48
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	TEXT
	{
		name = Sideslip Caption
		text = Sideslip$$$[#ffff9b]<=0,5:0=>[#afd3ff]° $&$ fc.Sideslip()
		position = 37, 12.75
	}
	//TEXT
	//{
	//	name = Sideslip value
	//	text = <=0,4:0=> $&$ fc.Sideslip()
	//	position = 46, 13.25
	//}
	TEXT
	{
		name = Pitch Caption
		text = Pitch
		position = 48.0, 19.875
		//position = 28.5, 11.625
	}
	IMAGE
	{
		name = Pitch Border
		texture = MOARdV/MFD/frame4ch80x48
		position = 748, 668
		//position = 452, 404
		size = 120, 72
		passiveColor = COLOR_MFD2_TEXT
	}
	TEXT
	{
		name = Pitch
		text = <=0,3:0=>$&$ fc.Pitch()
		position = 48.5, 21.25
		//position = 30, 13.0
		fontSize = 24, 48
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	TEXT
	{
		name = AoA Caption
		text = AoA$$$[#ffff9b]<=0,3:0=>[#afd3ff]° $&$ fc.AngleOfAttack()
		position = 55.5, 20.75
		//position = 37, 12.75
	}
	TEXT
	{
		name = Roll Caption
		text = Roll
		position = 48.5, 15.875
		//position = 28.5, 11.625
	}
	IMAGE
	{
		name = Roll Border
		texture = MOARdV/MFD/frame4ch80x48
		position = 748, 540
		//position = 452, 404
		size = 120, 72
		passiveColor = COLOR_MFD2_TEXT
	}
	TEXT
	{
		name = Roll
		text = <=0,4:0=>$&$ fc.Roll()
		position = 47.75, 17.25
		//position = 30, 13.0
		fontSize = 24, 48
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}
	
	IMAGE
	{
		name = Mode Border
		texture = MOARdV/MFD/frame4ch80x48
		position = 452, 908
		size = 120, 72
		passiveColor = COLOR_MFD2_TEXT
	}
	TEXT
	{
		name = Mode
		text = <=0,3:"OBT";"TGT";"SRF"=> $&$ fc.GetSASSpeedMode()
		position = 30, 28.75
		fontSize = 24, 48
		textColor = COLOR_MFD2_TEXT_HIGHLIGHT
	}

	TEXT
	{
		name = MET display
		textfile = MOARdV/MFD/MFD2_MET.txt
		position = 0, 29.5
	}
}
