PROP
{
	name = MAS_RWL_MasterCaution
	MODEL
	{
		model = ASET/ASET_Props/Instruments/RetroWarningLight/RetroWarningLight
	}

	MODULE
	{
		name = MASComponent

		TEXT_LABEL
		{
			name = Warning Text
			transform = WarningTextCenter
			fontSize = 3
			font = Liberation Sans
			style = Bold
			alignment = Center
			anchor = MiddleCenter
			emissive = never
			passiveColor = COLOR_MOARdV_UnlitBlackText
			text = CAUTION
		}

		AUDIO_PLAYER
		{
			name = alert
			sound = ASET/ASET_Props/Sounds/apollospec
			volume = 0.5
			trigger = ON
			variable = fc.Conditioned(fc.PropellantStageThreshold(0.0, 0.1) + fc.PowerThreshold(0.0, 0.1) + fc.RcsStageThreshold(0.0, 0.1) + fc.ResourceThreshold("Ablator", 0.0, 0.1) + ((1 - parachute.GetParachuteArmedOrDeployed()) * fc.AtmosphereDepth() * (fc.VerticalSpeed() < 0) * fc.VesselFlying()))
		}

		COLOR_SHIFT
		{
			name = Alarm lights
			transform = RetroWarningLights
			passiveColor = COLOR_MOARdV_RWL_Off
			activeColor = COLOR_MOARdV_RWL_Amber
			variable = fc.Conditioned(fc.PropellantStageThreshold(0.0, 0.1) + fc.PowerThreshold(0.0, 0.1) + fc.RcsStageThreshold(0.0, 0.1) + fc.ResourceThreshold("Ablator", 0.0, 0.1) + ((1 - parachute.GetParachuteArmedOrDeployed()) * fc.AtmosphereDepth() * (fc.VerticalSpeed() < 0) * fc.VesselFlying()))
			colorName = _EmissiveColor
		}
		// endUV: y = 0.8 = Green; 0.6 = Red; 0.4 = Amber; 0.2 = White
		TEXTURE_SHIFT
		{
			name = Light shift
			transform = RetroWarningLights
			startUV = 0.0, 0.0
			endUV = 0.0, 0.4
			layers = _MainTex _Emissive
			variable = fc.Conditioned(fc.PropellantStageThreshold(0.0, 0.1) + fc.PowerThreshold(0.0, 0.1) + fc.RcsStageThreshold(0.0, 0.1) + fc.ResourceThreshold("Ablator", 0.0, 0.1) + ((1 - parachute.GetParachuteArmedOrDeployed()) * fc.AtmosphereDepth() * (fc.VerticalSpeed() < 0) * fc.VesselFlying()))
		}
	}
}
